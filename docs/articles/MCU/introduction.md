# Introduction

## Knowledge

1. 冯诺伊曼体系，微型计算机的结构，计算机常用的数制和编码。

2. 单片机概述： 自动化，单片机，单片机应用系统结构，单片机开发系统。

3. 中断，定时器/计数器，并行通信，串行通信的基本概念。

## 1.1 微型计算机基础概述

### 1.1.1 冯诺伊曼体系

1. 微型计算机：以微处理器为核心，配上大容量的半导体存储器及功能强大的可编程接口芯片，连上外设及电源所组成的计算机 简称 PC (Personal Computer) 或 MC (Micro Computer)

   微型计算机加上软件，构成了微型计算机系统，简称 MCS (Micro Computer System).

2. 冯诺伊曼体体系

   - 为了存储程序与数据，需要有存储器

   - 为了进行运算，需要运算器

   - 为了输入程序和数据以及输出结果，需要有输入输出设备

   - 还需要控制器对各个部件的工作进行控制和管理

要点归纳为：

    - 采用二进制代码表示数据和指令

    - 采用存储程序的工作方式，即先编写程序，然后存储程序，最后自动连续地执行程序

    - 由运算器，存储器，控制器，输入设备和输出设备组成计算机硬件系统

3. 工作过程

   1. 取出执行：从存储器某个地址中起初要执行的指令送到 CPU 内部的指令寄存器暂时保存。

   2. 分析指令：把指令寄存器中的指令送到指令译码器，分析出该指令对应的操作。

   3. 执行指令：根据指令译码结果，向各个部件发出相应的控制信号，完成指令规定的各种操作。

   4. 形成下一条指令地址，为下一条指令做好准备。

### 1.1.2 微型计算机的基本结构

1. 硬件结构

微型计算机有微处理器，存储器，输入/输出口(IO)电路构成，各部分之间通过总线(Bus)连接。

    - 微处理器：微型计算机的核心。

    - 存储器：用来存放程序和数据。

    - 输入/输出接口电路：连接CPU与外部设备的桥梁。

    - 总线： 在微型计算机各芯片之间或芯片内部各部件之间传输信息的一组公共通信线。包括 地址总线 (Address Bus)，数据总线 （Data Bus），控制总线（Control Bus）。

        - 地址总线：微处理器用来想存储器或IO口传送地址信息的。三态单向总线。 它决定了微处理器可直接寻址的存储器和IO地址数量。

        - 数据总线：微处理器与存储器及外设交换数据的通路。是三态双向总线。 它的位数与微处理器的位数相同。

        - 控制总线：用来传输控制信号的，传送方向依具体控制信号而定。

单板机：将微处理器，存储器，I/O 接口电路以及简单的输入，输出设备组装在一块印刷电路板上，称为单板微型计算机，简称单板机

单片机：微处理器，存储器，I/O 接口电路集成在一块芯片上，称为微型单片机，简称单片机。

2. 微型计算机软件概述

软件： 使用和管理计算机的各种程序，而程序是完成所需要的一系列指令序列，程序的集合构成了计算机中的软件系统。

指令： 是计算机完成某种操作的命令。计算机恩狗执行的全部操作所对应的指令集和，称为该计算机的指令系统。

程序： 一系列指令的有序集合称为程序。编制程序的过程称为程序设计。

源程序：用符号语言编写的程序。

机器码：通过源程序经过汇编或变异产生的二进制数。

### 1.1.3 计算机中的数制

1. 二进制，十六进制，十进制

规定： B（Binary）为二进制，D（Decimal）为十进制，H（Hexadecimal）为十六进制

2. 带符号的数的表示

3. 带符号数溢出及其判断方法

溢出：带符号数的补码加，减运算的结果都超出了补码表示的范围。

判断溢出的方法：同符号相加或异符号相减时：若次高位向最高位有进位且最高位无进位，则发生溢出；反之，若次高位向最高位无进位且最高位有进位，则发生溢出

4. ASCII 码和 BCD 码

- ASCII（American Standard Code for Information-Interchange）美国信息交换标准代码，7 位二进制表示一个字符，包括 32 个标点符号，19 个阿里博数字，52 个英文大小些字母和 34 个控制符号，共 128 个。

  在计算机系统中，规定 7 个二进制位表示字母本身，1 位用于差错校验。

- BCD（Binary Convert Decimal）码

  在计算机中，分为压缩 BCD 码和非压缩 BCD 码，压缩 BCD 用 4 位二进制数表示 1 位十进制数，一个字节可以表示 2 位十进制数。而非压缩则用 8 位二进制数表示 1 位十进制数。

## 1.2 单片机概述

### 1.2.1 自动化

1. 自动化概念

> 自动化（Automation）指机器设备，系统或过程在没有人或较少人的直接参与下，按照人的要求，经过自动检测，信息处理，分析判断，操纵控制，实现预期的目标的过程。

自动化的优点

    - 高度的自动化程序，无需人工操作。

    - 工作效率高，提高企业生产效率。

    - 整个工艺的生产流程稳定，提高产品的一致性。

    - 适合大批量生产，降低企业生产成本。

2. 工业自动化

> 工业自动化： 及其设备或生产过程在不需要人工直接干预的情况下，按照预期的目标实现测量，操纵等信息处理和过程控制的统称。

工业自动化技术正在向智能化，网络化和集成化方向发展，主要体现在：

    - 以工业PC为基础的低成本工业控制自动化将成为主流；

    - PLC在向微型化，网络化，PC化和开放性方向发展；

    - 面向测控管一体化设计的DCS系统；

    - 控制系统正在向现场总线（FCS）方向发展；

    - 仪器仪表技术在向数字化，智能化，网络化，微型化方向发展；

    - 数控技术向智能化，开放性，网络化，信息化发展；

    - 工业控制网络将向有线和无线相结合方向发展。

3. 自动控制系统

> 自动控制系统：一些自动控制装置，对生产中某些关键性参数进行自动控制，是他们在收到外界干扰的影响而偏离正常状态时，能够被自动地调节二回到工艺所要求的数值范围内。可分为开环系统和闭环系统

    - 闭环控制（负反馈控制）：传感器检测被控对象的状态信息，并将其转变成物理信号传给控制装置。然后与希望状态（给定量）进行比较，从而产生一个控制信号，通过执行机构驱动被控对象运动，使其运动状态接近希望状态。

    - 开环控制：按照时间确定好的程序，一次发出信号去控制对象。

4. 智能仪器仪表

> 智能仪器仪表：含有微型计算机或者微型处理器的测量仪器，拥有对数据的存储运算逻辑判断及自动化操作等功能。

与传统仪器仪表相比，智能仪器具有一下功能特点：

    1. 操作自动化

    2. 具有自测功能

    3. 具有数据处理功能

    4. 具有友好的人机对话能力

    5. 具有可编程控操作能力

### 1.2.2 单片机

单片机：通过一定的工艺手段，将 CPU，存储器，输入/输出接口电路集成在一块芯片上，就称为单片机。 也叫单片微控制器（Single-chip-micro controller）或 微控制单元（Micro-Control Unit）MCU

1. 单片机的特点

   - 低噪声与高可靠性

   - 单片机寿命长

   - 8 位，32 位单片机共同发展

   - 低噪声与高速度

   - 低电压与低功耗

   - ISP（In-System Programming）与 IAP（In-Application Programming）。 ISP：直接焊接到电路板上，调试结束即为成品。 IAP：将 Flash 存储器映射为两个存储体，当运行一个存储体上的用户程序时，可对另一个存储体重新变成，之后将程序从一个存储体转向另一个。

2. 单片机的应用

   - 在智能仪表中的应用。提高他们的测量精度，加强其功能，简化仪器仪表的结构，便于维护和改进。

   - 在机电一体化中的应用。机电产品中的控制器，能充分发挥其体积小，可靠性高，控制功能强，安装方便等优点，大大提升了机器的功能，提高了机器的自动化，智能化的程度。

   - 在实时控制中的应用。航空航天，通信，遥控，遥测，工业机器人控制等各种实时控制和实时数据采集系统中，都可以用单片机作为控制器。

   - 在军工领域的应用。

   - 在分布式多机系统中的应用。

   - 在民用电子产品中的应用。

3. 常用的单片机产品

   1. MCS 系列及兼容单片机

   2. PIC 系列单片机

   3. MSP430 系列单片机

   4. ARM 处理器

   5. DSP 处理器

   6. STM32 微控制器

4. 单片机与 CPU，ARM，嵌入式系统的关系

   1. 单片机与 CPU 的关系：微处理器是指计算机系统核心部件（CPU），二并不是一台完整的计算机。单片机看起来与 CPU 一样，是一片大规模集成电路芯片，但是单片机内部集成了 CPU，存储器，I/O 口，总线系统，他是把计算机的主要零部件以集成电路的工艺，集成在一块芯片上，用一片芯片实现了一台基本的计算机系统。 总结：单片机是计算机，而 CPU 是计算机中的一个部件。

   2. 单片机与 ARM 的关系：ARM（Advanced RISC Machines）是微处理器行业的一家知名企业，他设计了大量高性能廉价且功耗低的 RISC 处理器，相关技术及软件。从硬件构成的角度去看，ARM 实际上是跑得快一点的单片机。

   3. 单片机与嵌入式系统的关系：单片机是当前构成嵌入式应用系统中最典型的主流机型。

### 1.2.3 单片机应用系统基本结构

单片机应用系统包括硬件和软件两个方面。软件方面主要利用汇编语言或 C 语言进行源程序设计。

- 硬件结构：

  1.  单片微控制器部分：单片机

  2.  测量部分：包括模拟量测量和状态量测量。铜鼓哟点偏激输入口完成的。

      - 模拟量测量： 被测量信号转变为电信号（模拟量）

      - 状态量测量： 传感器将被略信号转变为电信号（状态量）

  3.  控制输出部分：主要控制模拟设备和开关设备，通过输出口完成。

      - 特点： 1. 控制输出通道是应用系统的输出通道，大多数需要功率驱动。 2. 控制输出通道的隔离对系统的可靠性影响很大。 3. 根据输出控制的不同要求，控制输出通道电路可以是多种多样的。

  4.  人机接口：用户为了对应用系统进行干预，以及了解应用系统运行状态所设置的对话通道。

      - 特点：

        1.

  5.  通信部分：

  6.  CPU 与外设的数据传输方式：
